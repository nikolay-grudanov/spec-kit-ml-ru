# Спецификация данных: Bank Customer Churn Dataset

**Created**: 2026-02-13
**Status**: Draft
**Input**: Описание задачи: "Создать модель для классификации клиентов банка на уход/отток"

## Описание датасета

### Общая информация
- **Название датасета**: Bank Customer Churn
- **Тип данных**: Табличные данные
- **Размер датасета**: 10,000 клиентов для обучения, 2,000 для тестирования
- **Источник данных**: Внутренняя база данных банка / Kaggle Bank Churn dataset
- **Частота обновления**: Ежемесячно (обновление списка клиентов)

### Целевая переменная
- **Название**: churn
- **Тип**: Бинарная (binary)
- **Описание**: Ушел ли клиент из банка (1 - да, 0 - нет)
- **Распределение**: ~20% churn, ~80% stay (imbalanced)

## Схема данных

### Признаки
| Имя признака | Тип | Описание | Обязательный | Примечания |
|-------------|-----|----------|--------------|------------|
| customer_id | int | Уникальный ID клиента | да | Первичный ключ |
| age | int | Возраст клиента | да | 18-100 |
| gender | str | Пол клиента | да | Male/Female |
| credit_score | int | Кредитный рейтинг | да | 300-850 |
| country | str | Страна проживания | да | France/Germany/Spain |
| tenure | int | Количество лет в банке | да | 0-10 |
| balance | float | Баланс счета | да | В валюте |
| products_number | int | Количество продуктов | да | 1-4 |
| credit_card | int | Есть кредитная карта | да | 0/1 |
| active_member | int | Активный член | да | 0/1 |
| estimated_salary | float | Оценочная зарплата | да | В валюте |
| churn | int | Ушел из банка | да | 0/1 (target) |

### Ограничения и валидация
- **Типы данных**: customer_id, age, credit_score, tenure, products_number, credit_card, active_member, churn - int; gender, country - str; balance, estimated_salary - float
- **Диапазоны значений**: age 18-100, credit_score 300-850, tenure 0-10, products_number 1-4, credit_card 0/1, active_member 0/1, churn 0/1, balance >= 0, estimated_salary > 0
- **Обязательные поля**: Все поля обязательные
- **Уникальность**: customer_id должен быть уникальным

## Качество данных

### Проблемы с данными
- **Пропущенные значения**: Возможны пропущенные значения в balance, estimated_salary
- **Аномалии**: Возможны экстремальные значения balance, estimated_salary
- **Дубликаты**: Возможны дубликаты по customer_id (проверка уникальности)
- **Несогласованности**: Возможны разные форматы для gender (Male/Female vs M/F)
- **Imbalanced classes**: Целевая переменная несбалансирована (20% churn)

### Метрики качества
- **Процент полноты**: >95% (минимальное количество пропущенных значений)
- **Процент валидности**: >99% (соответствие типам и диапазонам)
- **Процент уникальности**: 100% (customer_id должен быть уникальным)
- **Консистентность**: Все значения должны быть в ожидаемых диапазонах

## Требования к предобработке

### Очистка данных
- **Обработка пропущенных значений**: Imputation (median для числовых, mode для категориальных)
- **Обработка аномалий**: Winsorization или удаление экстремальных значений
- **Удаление дубликатов**: Удаление записей с дублирующимся customer_id
- **Исправление несогласованностей**: Приведение gender к формату Male/Female

### Преобразования
- **Нормализация/стандартизация**: StandardScaler для числовых признаков
- **Кодирование категориальных признаков**: One-hot encoding для gender, country
- **Создание новых признаков**: Feature engineering (interaction terms, bins)
- **Снижение размерности**: PCA (опционально, если много признаков)

### Feature Engineering
- Создание новых признаков: balance_per_year, products_per_year
- Биннинг возраста: youth, adult, senior
- Interaction terms: age * tenure, balance / credit_score

## Стратегия разбиения

### Разбиение на выборки
- **Метод разбиения**: Стратифицированное случайное разбиение (по churn)
- **Пропорции**: 70% обучение, 15% валидация, 15% тест
- **Критерии разбиения**: Случайное разбиение с фиксированным seed
- **Защита от утечки данных**: Разделение до любой предобработки

### Валидация
- **Перекрестная проверка**: 5-fold стратифицированная кросс-валидация
- **Метрики на валидации**: AUC-ROC, accuracy, precision, recall, F1-score
- **Критерии остановки**: Ранняя остановка при отсутствии улучшения AUC-ROC

### Handling Class Imbalance
- **Методы**: SMOTE для oversampling, class weights в модели
- **Метрики**: F1-score для minority class важнее accuracy

## Версионирование

- **Стратегия версионирования**: DVC для версионирования датасета
- **Хранение версий**: Хранение хэшей файлов в Git, сами данные в DVC
- **Отслеживание изменений**: Изменения в датасете фиксируются в DVC

## Этические соображения

- **Защищенные признаки**: customer_id (PII), estimated_salary (confidential)
- **Конфиденциальность**: Anonymization или хеширование customer_id перед сохранением
- **Смещение в данных**: Проверка на смещение по gender, country, age
- **Fairness**: Оценка fairness metrics (equal opportunity, demographic parity)

## Соответствие регуляторным требованиям

- **GDPR**: Обработка PII только с согласия, право на удаление
- **Аудит**: Логирование всех доступов к данным клиентов
- **Безопасность**: Шифрование данных в покое и при передаче
